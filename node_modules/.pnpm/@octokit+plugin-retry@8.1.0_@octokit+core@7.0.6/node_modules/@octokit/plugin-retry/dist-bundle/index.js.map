{
  "version": 3,
  "sources": ["../dist-src/version.js", "../dist-src/error-request.js", "../dist-src/wrap-request.js", "../dist-src/index.js"],
  "sourcesContent": ["const VERSION = \"0.0.0-development\";\nexport {\n  VERSION\n};\n", "import {} from \"./types.js\";\nfunction isRequestError(error) {\n  return error.request !== void 0;\n}\nasync function errorRequest(state, octokit, error, options) {\n  if (!isRequestError(error) || !error?.request.request) {\n    throw error;\n  }\n  if (error.status >= 400 && !state.doNotRetry.includes(error.status)) {\n    const retries = options.request.retries != null ? options.request.retries : state.retries;\n    const retryAfter = Math.pow((options.request.retryCount || 0) + 1, 2);\n    throw octokit.retry.retryRequest(error, retries, retryAfter);\n  }\n  throw error;\n}\nexport {\n  errorRequest,\n  isRequestError\n};\n", "import Bottleneck, {} from \"bottleneck/light.js\";\nimport { RequestError } from \"@octokit/request-error\";\nimport { errorRequest } from \"./error-request.js\";\nasync function wrapRequest(state, octokit, request, options) {\n  const limiter = new Bottleneck();\n  limiter.on(\"failed\", function(error, info) {\n    const maxRetries = ~~error.request.request?.retries;\n    const after = ~~error.request.request?.retryAfter;\n    options.request.retryCount = info.retryCount + 1;\n    if (maxRetries > info.retryCount) {\n      return after * state.retryAfterBaseValue;\n    }\n  });\n  return limiter.schedule(\n    requestWithGraphqlErrorHandling.bind(null, state, octokit, request),\n    options\n  );\n}\nasync function requestWithGraphqlErrorHandling(state, octokit, request, options) {\n  const response = await request(options);\n  if (response.data && response.data.errors && response.data.errors.length > 0 && /Something went wrong while executing your query/.test(\n    response.data.errors[0].message\n  )) {\n    const error = new RequestError(response.data.errors[0].message, 500, {\n      request: options,\n      response\n    });\n    return errorRequest(state, octokit, error, options);\n  }\n  return response;\n}\nexport {\n  wrapRequest\n};\n", "import { VERSION } from \"./version.js\";\nimport { errorRequest } from \"./error-request.js\";\nimport { wrapRequest } from \"./wrap-request.js\";\nimport { VERSION as VERSION2 } from \"./version.js\";\nfunction retry(octokit, octokitOptions) {\n  const state = Object.assign(\n    {\n      enabled: true,\n      retryAfterBaseValue: 1e3,\n      doNotRetry: [400, 401, 403, 404, 410, 422, 451],\n      retries: 3\n    },\n    octokitOptions.retry\n  );\n  const retryPlugin = {\n    retry: {\n      retryRequest: (error, retries, retryAfter) => {\n        error.request.request = Object.assign({}, error.request.request, {\n          retries,\n          retryAfter\n        });\n        return error;\n      }\n    }\n  };\n  if (state.enabled) {\n    octokit.hook.error(\"request\", errorRequest.bind(null, state, retryPlugin));\n    octokit.hook.wrap(\"request\", wrapRequest.bind(null, state, retryPlugin));\n  }\n  return retryPlugin;\n}\nretry.VERSION = VERSION;\nexport {\n  VERSION2 as VERSION,\n  retry\n};\n"],
  "mappings": ";AAAA,IAAM,UAAU;;;ACChB,SAAS,eAAe,OAAO;AAC7B,SAAO,MAAM,YAAY;AAC3B;AACA,eAAe,aAAa,OAAO,SAAS,OAAO,SAAS;AAC1D,MAAI,CAAC,eAAe,KAAK,KAAK,CAAC,OAAO,QAAQ,SAAS;AACrD,UAAM;AAAA,EACR;AACA,MAAI,MAAM,UAAU,OAAO,CAAC,MAAM,WAAW,SAAS,MAAM,MAAM,GAAG;AACnE,UAAM,UAAU,QAAQ,QAAQ,WAAW,OAAO,QAAQ,QAAQ,UAAU,MAAM;AAClF,UAAM,aAAa,KAAK,KAAK,QAAQ,QAAQ,cAAc,KAAK,GAAG,CAAC;AACpE,UAAM,QAAQ,MAAM,aAAa,OAAO,SAAS,UAAU;AAAA,EAC7D;AACA,QAAM;AACR;;;ACdA,OAAO,oBAAoB;AAC3B,SAAS,oBAAoB;AAE7B,eAAe,YAAY,OAAO,SAAS,SAAS,SAAS;AAC3D,QAAM,UAAU,IAAI,WAAW;AAC/B,UAAQ,GAAG,UAAU,SAAS,OAAO,MAAM;AACzC,UAAM,aAAa,CAAC,CAAC,MAAM,QAAQ,SAAS;AAC5C,UAAM,QAAQ,CAAC,CAAC,MAAM,QAAQ,SAAS;AACvC,YAAQ,QAAQ,aAAa,KAAK,aAAa;AAC/C,QAAI,aAAa,KAAK,YAAY;AAChC,aAAO,QAAQ,MAAM;AAAA,IACvB;AAAA,EACF,CAAC;AACD,SAAO,QAAQ;AAAA,IACb,gCAAgC,KAAK,MAAM,OAAO,SAAS,OAAO;AAAA,IAClE;AAAA,EACF;AACF;AACA,eAAe,gCAAgC,OAAO,SAAS,SAAS,SAAS;AAC/E,QAAM,WAAW,MAAM,QAAQ,OAAO;AACtC,MAAI,SAAS,QAAQ,SAAS,KAAK,UAAU,SAAS,KAAK,OAAO,SAAS,KAAK,kDAAkD;AAAA,IAChI,SAAS,KAAK,OAAO,CAAC,EAAE;AAAA,EAC1B,GAAG;AACD,UAAM,QAAQ,IAAI,aAAa,SAAS,KAAK,OAAO,CAAC,EAAE,SAAS,KAAK;AAAA,MACnE,SAAS;AAAA,MACT;AAAA,IACF,CAAC;AACD,WAAO,aAAa,OAAO,SAAS,OAAO,OAAO;AAAA,EACpD;AACA,SAAO;AACT;;;AC1BA,SAAS,MAAM,SAAS,gBAAgB;AACtC,QAAM,QAAQ,OAAO;AAAA,IACnB;AAAA,MACE,SAAS;AAAA,MACT,qBAAqB;AAAA,MACrB,YAAY,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG;AAAA,MAC9C,SAAS;AAAA,IACX;AAAA,IACA,eAAe;AAAA,EACjB;AACA,QAAM,cAAc;AAAA,IAClB,OAAO;AAAA,MACL,cAAc,CAAC,OAAO,SAAS,eAAe;AAC5C,cAAM,QAAQ,UAAU,OAAO,OAAO,CAAC,GAAG,MAAM,QAAQ,SAAS;AAAA,UAC/D;AAAA,UACA;AAAA,QACF,CAAC;AACD,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACA,MAAI,MAAM,SAAS;AACjB,YAAQ,KAAK,MAAM,WAAW,aAAa,KAAK,MAAM,OAAO,WAAW,CAAC;AACzE,YAAQ,KAAK,KAAK,WAAW,YAAY,KAAK,MAAM,OAAO,WAAW,CAAC;AAAA,EACzE;AACA,SAAO;AACT;AACA,MAAM,UAAU;",
  "names": []
}
